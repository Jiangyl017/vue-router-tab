(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-router-tab"]=e():t["vue-router-tab"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"6b67":function(t,e,r){},"98b8":function(t,e,r){(function(t){function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var r=function(t){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new S(n||[]);return o._invoke=O(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",v="completed",p={};function m(){}function b(){}function g(){}var y={};y[a]=function(){return this};var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&i.call(w,a)&&(y=w);var T=g.prototype=m.prototype=Object.create(y);function P(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t){function r(n,o,a,s){var u=l(t[n],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===e(f)&&i.call(f,"__await")?Promise.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):Promise.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var n;function o(t,e){function i(){return new Promise((function(n,i){r(t,e,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=o}function O(t,e,r){var n=f;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===v){if("throw"===i)throw o;return L()}r.method=i,r.arg=o;while(1){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=l(t,e,r);if("normal"===u.type){if(n=r.done?v:h,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=v,r.method="throw",r.arg=u.arg)}}}function k(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=r,k(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function I(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){while(++n<t.length)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:r,done:!0}}return b.prototype=T.constructor=g,g.constructor=b,g[u]=b.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},P(_.prototype),_.prototype[s]=function(){return this},t.AsyncIterator=_,t.async=function(e,r,n,i){var o=new _(c(e,r,n,i));return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},P(T),T[u]="Generator",T[a]=function(){return this},T.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=I,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),p}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=r}catch(n){Function("r","regeneratorRuntime = r")(r)}}).call(this,r("62e4")(t))},a34a:function(t,e,r){t.exports=r("98b8")},cec0:function(t,e,r){"use strict";var n=r("6b67"),i=r.n(n);i.a},ea7e:function(t,e,r){"use strict";var n=r("f4d0"),i=r.n(n);i.a},f4d0:function(t,e,r){},f6fd:function(t,e){(function(t){var e="currentScript",r=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(n){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in r)if(r[t].src==e||"interactive"==r[t].readyState)return r[t];return null}}})})(document)},fb15:function(t,e,r){"use strict";var n;(r.r(e),"undefined"!==typeof window)&&(r("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(r.p=n[1]));var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"router-tab"},[r("header",{class:["router-tab-header",t.hasScroller&&"is-scroll"]},[r("a",{staticClass:"nav-prev",on:{click:function(e){return t.tabScroll("left")}}}),r("div",{staticClass:"router-tab-scroll"},[r("transition-group",t._b({staticClass:"router-tab-nav",attrs:{tag:"ul"},on:{"after-enter":t.onTabTransitionEnd,"after-leave":t.onTabTransitionEnd}},"transition-group",t.getTransOpt(t.tabTransition),!1),t._l(t.items,(function(e,n){var i;return r("router-link",{key:e.id||e.to,staticClass:"router-tab-item",class:(i={actived:t.activeTabId===e.id,"is-contextmenu":t.contextmenu.id===e.id,"is-closable":t.isTabClosable(e)},i[e.tabClass||""]=!0,i),attrs:{tag:"li",title:t.i18nText(e.tips||e.title)||t.lang.tab.untitled,to:e.to},nativeOn:{contextmenu:function(r){return r.preventDefault(),function(r){return t.showContextmenu(e.id,n,r)}(r)}}},[t._t("default",[e.icon?r("i",{staticClass:"tab-icon",class:e.icon}):t._e(),r("span",{staticClass:"tab-title"},[t._v(t._s(t.i18nText(e.title)||t.lang.tab.untitled))]),t.isTabClosable(e)?r("i",{staticClass:"tab-close",attrs:{title:t.lang.contextmenu.close},on:{click:function(r){return r.preventDefault(),t.closeTab(e.id)}}}):t._e()],null,{tab:e,tabs:t.items,index:n})],2)})),1)],1),r("a",{staticClass:"nav-next",on:{click:function(e){return t.tabScroll("right")}}})]),r("div",{staticClass:"router-tab-container",class:{loading:t.loading}},[r("router-alive",{ref:"routerAlive",attrs:{"alive-id":t.aliveId},on:{update:t.updateTab}},[r("transition",t._b({attrs:{appear:""},on:{"after-enter":t.onPageTransitionEnd,"after-leave":t.onPageTransitionEnd}},"transition",t.getTransOpt(t.pageTransition),!1),[t.isViewAlive?r("router-view",t._b({ref:"routerView",staticClass:"router-tab-page"},"router-view",t.routerView,!1)):t._e()],1)],1),r("transition-group",t._b({staticClass:"router-tab-iframes",attrs:{tag:"div"}},"transition-group",t.getTransOpt(t.pageTransition),!1),t._l(t.iframes,(function(e){return r("iframe",{directives:[{name:"show",rawName:"v-show",value:e===t.currentIframe,expression:"url === currentIframe"}],key:e,staticClass:"router-tab-iframe",attrs:{src:e,name:t.iframeNamePrefix+e,frameborder:"0"},on:{load:function(r){return t.iframeLoaded(e)}}})})),0)],1),r("transition",{attrs:{name:"router-tab-zoom"}},[t.contextmenu.id?r("div",{staticClass:"router-tab-contextmenu",style:"left: "+t.contextmenu.left+"px; top: "+t.contextmenu.top+"px;"},[r("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.isContextTabActived},on:{click:function(e){t.isContextTabActived&&t.refreshTab(t.contextmenu.id)}}},[t._v(" "+t._s(t.lang.contextmenu.refresh)+" ")]),r("a",{staticClass:"contextmenu-item",attrs:{disabled:t.items.length<2},on:{click:function(e){t.items.length>1&&t.refreshAll()}}},[t._v(" "+t._s(t.lang.contextmenu.refreshAll)+" ")]),r("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.isContextTabCanBeClosed},on:{click:function(e){t.isContextTabCanBeClosed&&t.closeTab(t.contextmenu.id)}}},[t._v(" "+t._s(t.lang.contextmenu.close)+" ")]),r("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.tabsLeft.length},on:{click:function(e){t.tabsLeft.length&&t.closeMulti(t.tabsLeft)}}},[t._v(" "+t._s(t.lang.contextmenu.closeLefts)+" ")]),r("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.tabsRight.length},on:{click:function(e){t.tabsRight.length&&t.closeMulti(t.tabsRight)}}},[t._v(" "+t._s(t.lang.contextmenu.closeRights)+" ")]),r("a",{staticClass:"contextmenu-item",attrs:{disabled:!t.tabsOther.length},on:{click:function(e){t.tabsOther.length&&t.closeMulti(t.tabsOther)}}},[t._v(" "+t._s(t.lang.contextmenu.closeOthers)+" ")])]):t._e()])],1)},o=[],a=r("a34a"),s=r.n(a),u=Object.create(null),c=[];function l(t){return void 0!==t&&null!==t}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=null;return function(){var n=this,i=arguments;clearTimeout(r),r=setTimeout((function(){t.call(n,i)}),e)}}function h(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){h(o,n,i,a,s,"next",t)}function s(t){h(o,n,i,a,s,"throw",t)}a(void 0)}))}}var v={data:function(){return{contextmenu:{id:null,index:-1,left:0,top:0}}},computed:{isContextTabActived:function(){return this.contextmenu.id===this.activeTabId},isContextTabCanBeClosed:function(){var t=this.items,e=this.contextmenu,r=t[e.index];return t.length>1&&r&&!1!==r.closable},tabsLeft:function(){var t=this.items,e=this.contextmenu,r=e.id,n=e.index;return r?t.slice(0,n).filter((function(t){var e=t.closable;return!1!==e})):c},tabsRight:function(){var t=this.items,e=this.contextmenu,r=e.id,n=e.index;return r?t.slice(n+1).filter((function(t){var e=t.closable;return!1!==e})):c},tabsOther:function(){var t=this.items,e=this.contextmenu.id;return e?t.filter((function(t){var r=t.closable,n=t.id;return!1!==r&&e!==n})):c}},watch:{$route:function(t){this.hideContextmenu()},"contextmenu.id":function(t,e){var r=this;!e&&t?document.addEventListener("click",this.onClick=function(t){t.target!==r.$el.querySelector(".router-tab-contextmenu")&&r.hideContextmenu()}):e&&!t&&document.removeEventListener("click",this.onClick)}},methods:{showContextmenu:function(t,e,r){var n=r||u,i=n.clientY,o=n.clientX;Object.assign(this.contextmenu,{id:t,index:e,top:i,left:o})},hideContextmenu:function(){this.showContextmenu(null,-1)},closeMulti:function(t){var e=this;return d(s.a.mark((function r(){var n,i,o,a,u,c,l,f,h,d;return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.items,i=e.$router,o=e.contextmenu,a=n.find((function(t){var e=t.id;return e===o.id})),u=!0,c=!1,l=void 0,r.prev=5,f=t[Symbol.iterator]();case 7:if(u=(h=f.next()).done){r.next=19;break}return d=h.value.id,r.prev=9,r.next=12,e.removeTab(d);case 12:r.next=16;break;case 14:r.prev=14,r.t0=r["catch"](9);case 16:u=!0,r.next=7;break;case 19:r.next=25;break;case 21:r.prev=21,r.t1=r["catch"](5),c=!0,l=r.t1;case 25:r.prev=25,r.prev=26,u||null==f.return||f.return();case 28:if(r.prev=28,!c){r.next=31;break}throw l;case 31:return r.finish(28);case 32:return r.finish(25);case 33:-1===n.findIndex((function(t){var r=t.id;return r===e.activeTabId}))&&i.replace(a.to);case 34:case"end":return r.stop()}}),r,null,[[5,21,25,33],[9,14],[26,,28,32]])})))()}}},p={tab:{untitled:"无标题"},contextmenu:{refresh:"刷新",refreshAll:"刷新所有",close:"关闭",closeLefts:"关闭左侧",closeRights:"关闭右侧",closeOthers:"关闭其他"},msg:{keepLastTab:"至少应保留1个页签",i18nProp:"请提供“i18n”方法以处理国际化内容"}},m={tab:{untitled:"Untitled"},contextmenu:{refresh:"Refresh",refreshAll:"Refresh All",close:"Close",closeLefts:"Close to the Left",closeRights:"Close to the Right",closeOthers:"Close Others"},msg:{keepLastTab:"Keep at least 1 tab",i18nProp:'Method "i18n" is not defined on the instance'}},b={"zh-CN":p,en:m},g="[Vue Router Tab]";function y(t,e){t||"undefined"!==typeof console&&console.warn("".concat(g," ").concat(e))}function x(t){return P(t)||T(t)||w()}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function T(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function P(t){if(Array.isArray(t))return t}var _={computed:{lang:function(){var t=this.language;return"string"===typeof t&&(t=b[t]),t||(t=b["en"]),t}},methods:{i18nText:function(t){var e=this.i18nParse(t),r=e.key,n=e.params;if(r){var i="function"===typeof this.i18n;if(this._hasI18nPropWarn||(y(i,this.lang.msg.i18nProp),this._hasI18nPropWarn=!0),i)return this.i18n(r,n)}return t},i18nParse:function(t){var e,r;if("string"===typeof t){var n=/^i18n:([^\s]+)$/.exec(t);n&&(e=n[1],r=[])}else if(Array.isArray(t)){var i=x(t);e=i[0],r=i.slice(1)}return{key:e,params:r}}}},O={data:function(){return{iframes:[],currentIframe:null,iframeNamePrefix:"RouterTabIframe-"}},methods:{getIframePath:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="".concat(this.getBasePath(),"/iframe/").concat(encodeURIComponent(t));return e&&(n+="/"+e,r&&(n+="/"+r)),n},openIframe:function(t,e,r){var n=this.getIframePath(t,e,r);this.$router.push(n)},closeIframe:function(t){var e=this.getIframePath(t);this.close(e,!1)},refreshIframe:function(t){var e=this.getIframePath(t);this.refresh(e,!1)},getIframeEl:function(t){var e=this.iframeNamePrefix+t;return document.getElementsByName(e)[0]},iframeMounted:function(t){var e=this.getIframeEl(t);this.$emit("iframe-mounted",t,e)},iframeLoaded:function(t){var e=this.getIframeEl(t);this.$emit("iframe-loaded",t,e)}}};function k(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){k(o,n,i,a,s,"next",t)}function s(t){k(o,n,i,a,s,"throw",t)}a(void 0)}))}}function C(t,e){return L(t)||I(t,e)||S()}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function I(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(u){i=!0,o=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw o}}return r}}function L(t){if(Array.isArray(t))return t}function j(t){return j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function R(t){t=Array.from(t);var e=t.length,r=t[0],n=t[1];if(e){if(1!==e||!r||"object"!==j(r)||r.name||r.fullPath||r.params||r.query||r.hash){if("boolean"===typeof n){var i=t,o=C(i,3),a=o[0],s=o[1],u=o[2];return{path:a,match:s,force:u}}var c=t,l=C(c,4),f=l[0],h=l[1],d=l[2],v=l[3];return{path:f,to:h,match:d,force:v}}return r}return{}}var A={methods:{open:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r&&this.refresh(t,!1),this.$router[e?"replace":"push"](t)},removeTab:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $(s.a.mark((function n(){var i,o;return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.items,o=i.findIndex((function(e){return e.id===t})),r||!e.keepLastTab||1!==i.length){n.next=4;break}throw new Error(e.lang.msg.keepLastTab);case 4:if(r){n.next=7;break}return n.next=7,e.pageLeavePromise(t,"close");case 7:e.$alive.remove(t),o>-1&&i.splice(o,1);case 9:case"end":return n.stop()}}),n)})))()},close:function(){var t=arguments,e=this;return $(s.a.mark((function r(){var n,i,o,a,u,c,l,f,h,d,v,p,m,b,g,x;return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=R(t),i=n.id,o=n.path,a=n.match,u=void 0===a||a,c=n.force,l=void 0===c||c,f=n.to,h=n.refresh,d=void 0!==h&&h,v=e.activeTabId,p=e.items,m=e.$router,i||!o){r.next=6;break}if(i=e.getIdByPath(o,u),i){r.next=6;break}return r.abrupt("return");case 6:return i||(i=v),r.prev=7,b=p.findIndex((function(t){return t.id===i})),r.next=11,e.removeTab(i,l);case 11:if(null!==f){r.next=13;break}return r.abrupt("return");case 13:f||v!==i||(g=p[b]||p[b-1],f=g?g.to:e.defaultPath),f&&(x=m.match(f),x.fullPath===e.$route.fullPath?e.refreshTab():e.open(f,!0,d)),r.next=20;break;case 17:r.prev=17,r.t0=r["catch"](7),y(!1,r.t0);case 20:case"end":return r.stop()}}),r,null,[[7,17]])})))()},closeTab:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeTabId,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $(s.a.mark((function i(){return s.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:t.close({id:e,to:r,force:n});case 1:case"end":return i.stop()}}),i)})))()},refresh:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=this.getIdByPath(t,e);n&&this.refreshTab(n,r)}else this.refreshTab(void 0,r)},refreshTab:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activeTabId,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return $(s.a.mark((function n(){return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,r){n.next=4;break}return n.next=4,t.pageLeavePromise(e,"refresh");case 4:t.$alive.remove(e),e===t.activeTabId&&t.reloadView(),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),y(!1,n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},refreshAll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return $(s.a.mark((function r(){var n,i;return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.$alive.cache,r.t0=s.a.keys(n);case 2:if((r.t1=r.t0()).done){r.next=15;break}if(i=r.t1.value,r.prev=4,e){r.next=8;break}return r.next=8,t.pageLeavePromise(i,"refresh");case 8:t.$alive.remove(i),r.next=13;break;case 11:r.prev=11,r.t2=r["catch"](4);case 13:r.next=2;break;case 15:t.reloadView();case 16:case"end":return r.stop()}}),r,null,[[4,11]])})))()},reset:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultPath;this.items.forEach((function(e){var r=e.id;return t.$alive.remove(r)})),this.clearTabsStore(),this.initTabs();var r=this.$router.match(e);r.fullPath===this.$route.fullPath?this.refreshTab():this.$router.replace(e)}}},E={created:function(){this.$router.beforeEach(this.routerPageLeaveGuard)},methods:{routerPageLeaveGuard:function(t,e,r){if(this._isDestroyed){var n=this.$router.beforeHooks,i=n.indexOf(this.routerPageLeaveGuard);i>-1&&n.splice(i,1),r()}else{var o=this.getAliveId(t),a=this.$alive,s=a&&a.cache[o]||u,c=s.route;c&&!this.isAlikeRoute(t,c)?this.pageLeavePromise(o,"replace").then((function(){return r()})).catch((function(){return r(!1)})):r()}},pageLeavePromise:function(t,e){var r=this;return new Promise((function(n,i){var o=r.items.find((function(e){return e.id===t})),a=r.$alive.cache[t]||u,s=a.vm,c=s&&s.$vnode.componentOptions.Ctor.options.beforePageLeave;"function"===typeof c?c.bind(s)(n,i,o,e):n()}))}}},N={methods:{matchRoutes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route,e=t.matched,r=e.findIndex((function(t){var e=t.instances;return!e.default||Object.values(e).find((function(t){return t&&t._isRouterPage}))}));return y(r>-1,"未能匹配到路由信息"),{baseRoute:e[r-1],pageRoute:e[r],pageRouteIdx:r,isNest:r!==e.length-1}},parsePath:function(t,e){for(var r in e)t=t.replace(":"+r,e[r]);return t},getCtorIdByNode:function(t){var e=t.componentOptions;return e?e.Ctor.cid:null},getBasePath:function(){var t=this.matchRoutes().baseRoute.path,e=this.$route.params;return this.parsePath(t,e)},getPagePath:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.matchRoutes(t),r=e.pageRoute,n=e.isNest;if(n)return this.parsePath(r.path,t.params)},getPageComp:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route,e=this.matchRoutes(t),r=e.pageRoute;return r?r.components.default:null},getPathWithoutHash:function(t){return t.hash?t.fullPath.replace(t.hash,""):t.fullPath},isAlikeRoute:function(t,e){var r=this.getPagePath(t),n=this.getPagePath(e);return this.getPathWithoutHash(t)===this.getPathWithoutHash(e)||r&&n&&r===n},isNestRoute:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.matchRoutes(t);return e.isNest}}},V={path:function(t,e){return e||t.path},fullpath:function(t,e){return e||t.fullPath.replace(t.hash,"")}},B={props:{aliveId:{type:[String,Function],default:"path"}},mixins:[N],methods:{getAliveId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.matchRoutes(t),r=t.meta&&t.meta.aliveId||this.aliveId;return"string"===typeof r&&(r=V[r.toLowerCase()]),"function"!==typeof r&&(r=V.path),r.bind(this)(t,this.getPagePath(t,e))}}};function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.scrollTo?t.scrollTo({left:e,top:r,behavior:"smooth"}):(t.scrollLeft=e,t.scrollTop=r)}function M(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var r=t[e];if(l(r)&&(l(r.componentOptions)||F(r)))return r}}function F(t){return t.isComment&&t.asyncFactory}function q(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}function G(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){q(o,n,i,a,s,"next",t)}function s(t){q(o,n,i,a,s,"throw",t)}a(void 0)}))}}var K={data:function(){return{hasScroller:!1}},watch:{activeTabId:function(){var t=this;return G(s.a.mark((function e(){var r,n,i,o;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$el){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$nextTick();case 4:r=t.$el.querySelector(".router-tab-nav .actived"),n=t.$el.querySelector(".router-tab-scroll"),r&&(i=r.offsetLeft,o=n.scrollLeft,(i<o||i+r.clientWidth>o+n.clientWidth)&&t.adjust());case 7:case"end":return e.stop()}}),e)})))()}},created:function(){this.$nextTick(this.adjust)},mounted:function(){window.addEventListener("resize",this.onResize=f(this.adjust))},destroyed:function(){window.removeEventListener("resize",this.onResize)},methods:{tabScroll:function(t){var e=this.$el.querySelector(".router-tab-header"),r=e.querySelector(".router-tab-scroll"),n=e.clientWidth-110;W(r,r.scrollLeft+("left"===t?-n:n))},adjust:function(){if(this.$el){var t=this.$el.querySelector(".router-tab-header"),e=t.querySelector(".router-tab-scroll"),r=e.querySelector(".router-tab-nav"),n=r.querySelector(".actived"),i=this.hasScroller=r.clientWidth>e.clientWidth;n&&i&&W(e,n.offsetLeft+(n.clientWidth-e.clientWidth)/2)}}}},z={computed:{restoreKey:function(){var t=this.restore,e=this.getBasePath();if(!t||"undefined"===typeof sessionStorage)return"";var r="RouterTab:restore:".concat(e);return"string"===typeof t&&(r+=":".concat(t)),r}},mounted:function(){window.addEventListener("beforeunload",this.saveTabs)},destroyed:function(){window.removeEventListener("beforeunload",this.saveTabs)},watch:{restoreKey:function(){if(this.restoreWatch){var t=this.activeTab;this.initTabs(),this.activeTab||this.items.push(t)}}},methods:{saveTabs:function(){this.restoreKey&&sessionStorage.setItem(this.restoreKey,JSON.stringify(this.items))},clearTabsStore:function(){this.restoreKey&&sessionStorage.removeItem(this.restoreKey)},restoreTabs:function(){if(!this.restoreKey)return!1;var t=sessionStorage.getItem(this.restoreKey),e=!1;try{t=JSON.parse(t),Array.isArray(t)&&t.length&&(e=!0,this.items=t)}finally{}return e}}};function D(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}function H(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){D(o,n,i,a,s,"next",t)}function s(t){D(o,n,i,a,s,"throw",t)}a(void 0)}))}}var U={name:"RouterTab",mixins:[v,_,O,A,E,B,K,z],props:{tabs:{type:Array,default:function(){return[]}},restore:{type:[Boolean,String],default:!1},restoreWatch:{type:Boolean,default:!1},keepLastTab:{type:Boolean,default:!0},defaultPage:[String,Object],language:{type:[String,Object],default:"zh-CN"},i18n:Function,routerView:Object,tabTransition:{type:[String,Object],default:"router-tab-zoom"},pageTransition:{type:[String,Object],default:function(){return{name:"router-tab-swap",mode:"out-in"}}}},data:function(){return{loading:!1,items:[],activeTabId:null,isViewAlive:!0,isMounted:!1}},computed:{defaultPath:function(){return this.defaultPage||this.getBasePath()},$alive:function(){return this.isMounted?this.$refs.routerAlive:null},activeTab:function(){var t=this;return this.items.find((function(e){return e.id===t.activeTabId}))}},watch:{$route:function(t){this.loading=!1,this.updateActiveTab(),this.fixCommentPage()}},created:function(){U.Vue.prototype.$routerTab=this,this.initTabs(),this.updateActiveTab()},mounted:function(){this.isMounted=!0},destroyed:function(){U.Vue.prototype.$routerTab===this&&(U.Vue.prototype.$routerTab=null)},methods:{initTabs:function(){this.restoreTabs()||this.presetTabs()},presetTabs:function(){var t=this,e=this.tabs,r=this.$router,n={};this.items=e.map((function(e,i){var o="string"===typeof e?{to:e}:e||u,a=o.to,s=o.closable,c=o.title,l=o.tips,f=a&&r.match(a);if(f){var h=t.getRouteTab(f),d=h.id;if(!n[d])return c&&(h.title=c),l&&(h.tips=l),h.closable=!1!==s,n[d]=h}})).filter((function(t){return!!t}))},updateActiveTab:function(){this.activeTabId=this.getAliveId()},updateTab:function(t,e){var r=e.route,n=e.tab,i=this.items,o=i.findIndex((function(e){var r=e.id;return r===t})),a=Object.assign(this.getRouteTab(r),n);if(o>-1){var s=i[o];a.closable=!1!==s.closable,this.$set(i,o,a)}else i.push(a)},getIdByPath:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var r=this.$router.match(t,this.$router.currentRoute);if(!e)return this.getAliveId(r);var n=this.getPathWithoutHash(r),i=this.items.find((function(t){var e=t.to;return e.split("#")[0]===n}));return i?i.id:void 0}},getRouteTab:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.matchRoutes(t),r=this.getAliveId(t),n=e.pageRoute.meta,i=n.title,o=n.icon,a=n.tips;return{id:r,to:t.fullPath,title:i,icon:o,tips:a}},isTabClosable:function(t){return!1!==t.closable&&!(this.keepLastTab&&this.items.length<2)},getTransOpt:function(t){return"string"===typeof t?{name:t}:t},reloadView:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return H(s.a.mark((function r(){return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.isViewAlive=!1,!e){r.next=5;break}return r.next=4,t.$nextTick();case 4:t.isViewAlive=!0;case 5:case"end":return r.stop()}}),r)})))()},onTabTransitionEnd:function(){this.adjust()},onPageTransitionEnd:function(){this.isViewAlive||(this.isViewAlive=!0)},fixCommentPage:function(){8===this.$alive.$el.nodeType&&this.reloadView(!0)}}},X=U,Y=X;r("cec0"),r("ea7e");function J(t,e,r,n,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=r,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,u):[u]}return{exports:t,options:c}}var Q=J(Y,i,o,!1,null,null,null),Z=Q.exports,tt={name:"RouterAlive",mixins:[B],created:function(){Object.assign(this,{cache:Object.create(null),lastRoute:this.$route})},destroyed:function(){this.removeAll(),this.cache=null,this.lastRoute=null},render:function(){var t=this.$slots.default,e=M(t),r=e&&e.componentOptions;if(r){var n=this.$route,i=this.lastRoute,o="transition"===r.tag?r.children[0]:e;if(o&&o.componentOptions){var a=this.getAliveId(),s=this.get(a),c=s||u,l=c.vm,f=c.route,h=!1,d=i!==n,v=this.isAlikeRoute(n,i),p=d&&!v&&this.getPageComp(n)===this.getPageComp(i);if(d&&(this.lastRoute=n,this.set(a,{route:n})),l){var m=this.getCtorIdByNode(o),b=l._ctorId;b&&b!==m?this.remove(a):this.isAlikeRoute(f,n)?(o.componentInstance=l,!v&&f.fullPath!==n.fullPath&&this.isNestRoute(n)&&(l._nestCacheForceReload=!0)):(this.remove(a),h=!0),l._ctorId=m}p&&(h=!0),h&&this.$routerTab.reloadView(),o.data.keepAlive=!0,o.data.routerAlive=this}}return e||t&&t[0]},methods:{set:function(t,e){var r=this.cache,n=r[t];return n&&(e=Object.assign(n,e)),this.$emit("update",t,e),r[t]=e},get:function(t){return this.cache[t]},remove:function(t){var e=this.cache,r=this.get(t);r&&(r.vm&&r.vm.$destroy(),delete e[t])},removeAll:function(){var t=this.cache;for(var e in t)this.remove(e)}}};function et(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?et(Object(r),!0).forEach((function(e){nt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var it={created:function(){var t=this.$route,e=this.$vnode,r=e&&e.data.routerAlive;if(!r)return!1;this._isRouterPage=!0;var n=r.getAliveId(t),i=r.set(n,{route:t,vm:this});this.$watch("routeTab",(function(t,e){i.tab="string"===typeof t?{title:t}:t,r.set(n,i)}),{deep:!0,immediate:!0})},activated:function(){if(this._nestCacheForceReload){delete this._nestCacheForceReload;var t=this.$route,e=t.name,r=t.path,n=t.params,i=t.query,o=t.hash;i=rt({},i,{_forceReload:+new Date}),this.$router.replace({name:e,path:r,params:n,query:i,hash:o})}},destroyed:function(){this._isRouterPage&&(this.$vnode.data.routerAlive=null)}},ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"router-tab-iframe-fake"})},at=[];function st(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void r(c)}s.done?e(u):Promise.resolve(u).then(n,i)}function ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){st(o,n,i,a,s,"next",t)}function s(t){st(o,n,i,a,s,"throw",t)}a(void 0)}))}}var ct={name:"Iframe",props:{src:String,title:String,icon:String},data:function(){return{routeTab:null}},computed:{url:function(){var t=this.src;return/^javascript:/.test(t)?"about:blank":t}},mounted:function(){var t=this;return ut(s.a.mark((function e(){var r,n,i,o,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.url,n=t.title,i=t.icon,o=t.$routerTab,a=o.iframes,t.routeTab={title:n,icon:i},a.includes(r)||a.push(r),o.currentIframe=r,e.next=7,t.$nextTick();case 7:t.$routerTab.iframeMounted(r);case 8:case"end":return e.stop()}}),e)})))()},activated:function(){this.$routerTab.currentIframe=this.url},deactivated:function(){this.$routerTab.currentIframe=null},destroyed:function(){var t=this.url,e=this.$routerTab.iframes,r=e.indexOf(t);r>-1&&e.splice(r,1)}},lt=ct,ft=J(lt,ot,at,!1,null,null,null),ht=ft.exports,dt=[{path:"iframe/:src/:title?/:icon?",component:ht,props:!0,meta:{aliveId:function(t){return"iframe-".concat(t.params.src)}}}];Z.install=function t(e,r){t.installed||(Z.Vue=e,t.installed=!0,e.component(Z.name,Z),e.component(tt.name,tt),e.mixin(it))},"undefined"!==typeof window&&window.Vue&&window.Vue.use(Z);var vt=Z,pt=dt;r.d(e,"RouterTabRoutes",(function(){return pt}));e["default"]=vt}})}));
//# sourceMappingURL=vue-router-tab.umd.min.js.map