(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-router-tab"]=e():t["vue-router-tab"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fb15")}({"0d3e":function(t,e,r){"use strict";r.r(e),e["default"]={tab:{untitled:"无标题"},contextmenu:{refresh:"刷新",refreshAll:"刷新全部",close:"关闭",closeLefts:"关闭左侧",closeRights:"关闭右侧",closeOthers:"关闭其他"},msg:{keepLastTab:"至少应保留1个页签",i18nProp:"请提供“i18n”方法以处理国际化内容"}}},"3dec":function(t,e,r){"use strict";r.r(e),e["default"]={tab:{untitled:"Untitled"},contextmenu:{refresh:"Refresh",refreshAll:"Refresh All",close:"Close",closeLefts:"Close to the Left",closeRights:"Close to the Right",closeOthers:"Close Others"},msg:{keepLastTab:"Keep at least 1 tab",i18nProp:'Method "i18n" is not defined on the instance'}}},"751c":function(t,e,r){},8875:function(t,e,r){var n,i,o;(function(r,a){i=[],n=a,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var r,n,i,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,u=o.exec(d.stack)||a.exec(d.stack),s=u&&u[1]||!1,c=u&&u[2]||!1,l=document.location.href.replace(document.location.hash,""),f=document.getElementsByTagName("script");s===l&&(r=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=r.replace(n,"$1").trim());for(var h=0;h<f.length;h++){if("interactive"===f[h].readyState)return f[h];if(f[h].src===s)return f[h];if(s===l&&f[h].innerHTML&&f[h].innerHTML.trim()===i)return f[h]}return null}}return t}))},"96cf":function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(A){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=P(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(A){return{type:"throw",arg:A}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",v="completed",p={};function m(){}function b(){}function y(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(I([])));x&&x!==r&&n.call(x,o)&&(g=x);var O=y.prototype=m.prototype=Object.create(g);function j(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,e){function r(i,o,a,u){var s=l(t[i],t,o);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;function o(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function P(t,e,r){var n=f;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===v){if("throw"===i)throw o;return D()}r.method=i,r.arg=o;while(1){var a=r.delegate;if(a){var u=S(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var s=l(t,e,r);if("normal"===s.type){if(n=r.done?v:h,s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=v,r.method="throw",r.arg=s.arg)}}}function S(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=l(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function I(t){if(t){var r=t[o];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){while(++i<t.length)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:D}}function D(){return{value:e,done:!0}}return b.prototype=O.constructor=y,y.constructor=b,b.displayName=s(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},j($.prototype),$.prototype[a]=function(){return this},t.AsyncIterator=$,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new $(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(O),s(O,u,"Generator"),O[o]=function(){return this},O.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=I,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return u.type="throw",u.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},a34a:function(t,e,r){t.exports=r("96cf")},b13e:function(t,e,r){var n={"./en.js":"3dec","./zh.js":"0d3e"};function i(t){var e=o(t);return r(e)}function o(t){if(!r.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id="b13e"},fb15:function(t,e,r){"use strict";if(r.r(e),r.d(e,"RouterAlive",(function(){return Gt})),r.d(e,"RouterTabRoutes",(function(){return er})),r.d(e,"Iframe",(function(){return tr})),"undefined"!==typeof window){var n=window.document.currentScript,i=r("8875");n=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var o=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(r.p=o[1])}var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"router-tab"},[r("header",{ref:"header",staticClass:"router-tab__header"},[r("div",{staticClass:"router-tab__slot-start"},[t._t("start")],2),r("tab-scroll",{ref:"scroll"},[r("transition-group",t._b({staticClass:"router-tab__nav",attrs:{tag:"ul"},on:{"after-enter":t.onTabTrans,"after-leave":t.onTabTrans}},"transition-group",t.tabTrans,!1),t._l(t.items,(function(e,n){return r("tab-item",{key:e.id||e.to,ref:"tab",refInFor:!0,attrs:{data:e,index:n},nativeOn:{contextmenu:function(r){return r.preventDefault(),function(r){return t.showContextmenu(e.id,n,r)}(r)}}})})),1)],1),r("div",{staticClass:"router-tab__slot-end"},[t._t("end")],2)],1),r("div",{staticClass:"router-tab__container"},[r("router-alive",{attrs:{"page-class":"router-tab-page","keep-alive":t.keepAlive,reuse:t.reuse,max:t.maxAlive,transition:t.pageTrans},on:{ready:t.onAliveReady,change:t.onAliveChange}}),r("transition-group",t._b({staticClass:"router-tab__iframes",attrs:{tag:"div"}},"transition-group",t.pageTrans,!1),t._l(t.iframes,(function(e){return r("iframe",{directives:[{name:"show",rawName:"v-show",value:e===t.currentIframe,expression:"url === currentIframe"}],key:e,staticClass:"router-tab__iframe",attrs:{src:e,name:t.iframeNamePrefix+e,frameborder:"0"},on:{load:function(r){return t.iframeLoaded(e)}}})})),0)],1),r("transition",{attrs:{name:"router-tab-zoom"}},[!1!==t.contextmenu&&t.contextData.index>-1?r("tab-contextmenu",{attrs:{data:t.contextData,menu:t.contextMenu}}):t._e()],1)],1)},u=[],s=r("a34a"),c=r.n(s);function l(t,e){return p(t)||v(t,e)||h(t,e)||f()}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){if(t){if("string"===typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(s){i=!0,o=s}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw o}}return r}}function p(t){if(Array.isArray(t))return t}function m(t){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var b=Object.create(null);function y(t,e){if(t.length){var r=t.indexOf(e);if(r>-1)return t.splice(r,1)}}function g(t){var e=t.wrap,r=t.left,n=void 0===r?0:r,i=t.top,o=void 0===i?0:i,a=t.smooth,u=void 0===a||a;e&&(e.scrollTo?e.scrollTo({left:n,top:o,behavior:u?"smooth":"auto"}):(e.scrollLeft=n,e.scrollTop=o))}function w(t){var e=t.el,r=t.wrap,n=t.block,i=void 0===n?"start":n,o=t.inline,a=void 0===o?"nearest":o;if(e&&r)if(e.scrollIntoView)e.scrollIntoView({behavior:"smooth",block:i,inline:a});else{var u,s,c=e.offsetLeft,l=e.offsetTop;s="center"===i?l+(e.clientHeight-r.clientHeight)/2:l,u="center"===a?c+(e.clientWidth-r.clientWidth)/2:c,g({wrap:r,left:u,top:s})}}var x=function(){var t=null;return function(){if(null!==t)return t;var e=document.createElement("div");return e.style.cssText="width: 100px; height: 100px;overflow-y: scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,e.parentElement.removeChild(e),t}}();function O(t,e,r){var n={},i=function(e,i){null!==i&&"object"===m(i)||(i={default:i});var o=i,a=o.default,u=o.alias;n[u||e]=function(){var n=this[t][e];return r&&"function"===typeof n?n(this[r]):void 0!==a&&void 0===n?"function"===typeof a?a.bind(this)():a:n}};return Array.isArray(e)?e.forEach((function(t){return i(t)})):Object.entries(e).forEach((function(t){var e=l(t,2),r=e[0],n=e[1];return i(r,n)})),n}var j=function(t){return t.split("#")[0]};function $(t){return"string"===typeof t?{name:t}:t}function P(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,i)}function S(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){P(o,n,i,a,u,"next",t)}function u(t){P(o,n,i,a,u,"throw",t)}a(void 0)}))}}var T={data:function(){return{contextData:{id:null,index:-1,left:0,top:0}}},computed:{contextMenu:function(){return Array.isArray(this.contextmenu)?this.contextmenu:void 0}},watch:{$route:function(){this.hideContextmenu()},onDragSort:function(){this.hideContextmenu()}},mounted:function(){document.addEventListener("click",this.contextmenuClickOutSide)},destroyed:function(){document.removeEventListener("click",this.contextmenuClickOutSide)},methods:{showContextmenu:function(t,e,r){var n=this;return S(c.a.mark((function i(){var o,a,u;return c.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(null===t||null===n.contextData.id){i.next=4;break}return n.hideContextmenu(),i.next=4,n.$nextTick();case 4:o=r||b,a=o.clientY,u=o.clientX,Object.assign(n.contextData,{id:t,index:e,top:a,left:u});case 6:case"end":return i.stop()}}),i)})))()},hideContextmenu:function(){this.showContextmenu(null,-1)},contextmenuClickOutSide:function(t){t.target!==this.$el.querySelector(".router-tab-contextmenu")&&this.hideContextmenu()}}};function k(t,e){return E(t)||A(t,e)||I(t,e)||_()}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(t,e){if(t){if("string"===typeof t)return D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(t,e):void 0}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(s){i=!0,o=s}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw o}}return r}}function E(t){if(Array.isArray(t))return t}var L=r("b13e"),C=L.keys().reduce((function(t,e){var r=/\.\/(.*).js/g.exec(e),n=k(r,2),i=n[1];return t[i]=L(e).default,t}),{}),R="[Vue Router Tab]";function M(t,e){t||"undefined"!==typeof console&&console.warn("".concat(R," ").concat(e))}function W(t){return K(t)||B(t)||U(t)||N()}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(t,e){if(t){if("string"===typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(t,e):void 0}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function B(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function K(t){if(Array.isArray(t))return t}var F={computed:{langs:function(){var t=this.lang;return"auto"===t&&(t=(navigator.language||navigator.userLanguage).substr(0,2)),"string"===typeof t&&(t=C[t]),t||(t=C["en"]),t}},methods:{i18nText:function(t){var e=this.i18nParse(t),r=e.key,n=e.params;if(r){var i="function"===typeof this.i18n;if(this._hasI18nPropWarn||(M(i,this.langs.msg.i18nProp),this._hasI18nPropWarn=!0),i)return this.i18n(r,n)}return t},i18nParse:function(t){var e,r;if("string"===typeof t){var n=/^i18n:([^\s]+)$/.exec(t);n&&(e=n[1],r=[])}else if(Array.isArray(t)){var i=W(t);e=i[0],r=i.slice(1)}return{key:e,params:r}}}},H={data:function(){return{iframes:[],currentIframe:null,iframeNamePrefix:"RouterTabIframe-"}},methods:{getIframePath:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="".concat(this.basePath,"/iframe/").replace(/\/+/g,"/")+encodeURIComponent(t);return e&&(n+="/"+e,r&&(n+="/"+r)),n},openIframe:function(t,e,r){var n=this.getIframePath(t,e,r);this.$router.push(n)},closeIframe:function(t){var e=this.getIframePath(t);this.close({path:e,match:!1})},refreshIframe:function(t){var e=this.getIframePath(t);this.refresh(e,!1)},getIframeEl:function(t){var e=this.iframeNamePrefix+t;return document.getElementsByName(e)[0]},iframeMounted:function(t){var e=this.getIframeEl(t);this.$emit("iframe-mounted",t,e)},iframeLoaded:function(t){var e=this.getIframeEl(t);this.$emit("iframe-loaded",t,e)}}};function z(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,i)}function G(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){z(o,n,i,a,u,"next",t)}function u(t){z(o,n,i,a,u,"throw",t)}a(void 0)}))}}function X(t,e){return Z(t)||Q(t,e)||Y(t,e)||q()}function q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Y(t,e){if(t){if("string"===typeof t)return J(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(t,e):void 0}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Q(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(s){i=!0,o=s}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw o}}return r}}function Z(t){if(Array.isArray(t))return t}function tt(t){return tt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t){t=Array.from(t);var e=t.length,r=t[0];if(e){if(!r||"object"!==tt(r)||r.name||r.fullPath||r.params||r.query||r.hash){var n=t,i=X(n,2),o=i[0],a=i[1];return{path:o,to:a}}return r}return{}}function rt(t,e){var r=/\/$/;return t.replace(r,"")===e.replace(r,"")}var nt={methods:{open:function(t){var e=arguments,r=this;return G(c.a.mark((function n(){var i,o,a,u,s;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]&&e[1],o=!(e.length>2&&void 0!==e[2])||e[2],a=r.activeTabId,u=r.getRouteKey(t),s=rt(a,u),"sameTab"===o&&(o=s),o&&r.refresh(t,!1),n.prev=7,n.next=10,r.$router[i?"replace":"push"](t);case 10:n.next=14;break;case 12:n.prev=12,n.t0=n["catch"](7);case 14:return n.prev=14,s&&r.reload(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[7,12,14,17]])})))()},removeTab:function(t){var e=arguments,r=this;return G(c.a.mark((function n(){var i,o,a;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.length>1&&void 0!==e[1]&&e[1],o=r.items,a=o.findIndex((function(e){return e.id===t})),i||!r.keepLastTab||1!==o.length){n.next=5;break}throw new Error(r.langs.msg.keepLastTab);case 5:if(i){n.next=8;break}return n.next=8,r.leavePage(t,"close");case 8:r.$alive.remove(t),a>-1&&o.splice(a,1);case 10:case"end":return n.stop()}}),n)})))()},close:function(){var t=arguments,e=this;return G(c.a.mark((function r(){var n,i,o,a,u,s,l,f,h,d,v,p,m,b;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=et(t),i=n.id,o=n.path,a=n.match,u=void 0===a||a,s=n.force,l=void 0===s||s,f=n.to,h=n.refresh,d=void 0!==h&&h,v=e.activeTabId,p=e.items,i||!o){r.next=6;break}if(i=e.getIdByPath(o,u),i){r.next=6;break}return r.abrupt("return");case 6:return i||(i=v),r.prev=7,m=p.findIndex((function(t){return t.id===i})),r.next=11,e.removeTab(i,l);case 11:if(null!==f){r.next=13;break}return r.abrupt("return");case 13:f||v!==i||(b=p[m]||p[m-1],f=b?b.to:e.defaultPath),f&&e.open(f,!0,!1!==d||"sameTab"),r.next=20;break;case 17:r.prev=17,r.t0=r["catch"](7),M(!1,r.t0);case 20:case"end":return r.stop()}}),r,null,[[7,17]])})))()},closeTab:function(){var t=arguments,e=this;return G(c.a.mark((function r(){var n,i,o;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.length>0&&void 0!==t[0]?t[0]:e.activeTabId,i=t.length>1?t[1]:void 0,o=t.length>2&&void 0!==t[2]&&t[2],e.close({id:n,to:i,force:o});case 4:case"end":return r.stop()}}),r)})))()},refresh:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t&&this.getIdByPath(t,e)||void 0;this.refreshTab(n,r)},refreshTab:function(){var t=arguments,e=this;return G(c.a.mark((function r(){var n,i;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.length>0&&void 0!==t[0]?t[0]:e.activeTabId,i=t.length>1&&void 0!==t[1]&&t[1],r.prev=2,i){r.next=6;break}return r.next=6,e.leavePage(n,"refresh");case 6:e.$alive.refresh(n),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),M(!1,r.t0);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},refreshAll:function(){var t=arguments,e=this;return G(c.a.mark((function r(){var n,i,o;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=t.length>0&&void 0!==t[0]&&t[0],i=e.$alive.cache,r.t0=c.a.keys(i);case 3:if((r.t1=r.t0()).done){r.next=16;break}if(o=r.t1.value,r.prev=5,n){r.next=9;break}return r.next=9,e.leavePage(o,"refresh");case 9:e.$alive.refresh(o),r.next=14;break;case 12:r.prev=12,r.t2=r["catch"](5);case 14:r.next=3;break;case 16:case"end":return r.stop()}}),r,null,[[5,12]])})))()},reset:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultPath;this.items.forEach((function(e){var r=e.id;return t.$alive.remove(r)})),this.clearTabsStore(),this.initTabs(),this.open(e,!0,!0)}}};function it(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,i)}function ot(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){it(o,n,i,a,u,"next",t)}function u(t){it(o,n,i,a,u,"throw",t)}a(void 0)}))}}var at,ut,st=function(t){return function(e,r,n){var i=t.app.$tabs;if(i){var o,a,u=i.getRouteKey(e),s=i.$alive,c=s&&s.cache[u]||b,l=c.alivePath,f=i.matchRoute(e);l&&l!==f.alivePath?(a="replace",o=u):s.basePath!==f.basePath&&(a="leave",o=i.activeTabId),a?i.leavePage(o,a).then(n).catch((function(){return n(!1)})):n()}else n()}},ct={created:function(){var t=this.$router;t._RouterTabInit||(t.beforeEach(st(t)),t._RouterTabInit=!0)},methods:{leavePage:function(t,e){var r=this;return ot(c.a.mark((function n(){var i,o,a,u;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=r.items.find((function(e){return e.id===t})),o=r.$alive.cache[t]||b,a=o.vm,u=a&&a.$vnode.componentOptions.Ctor.options.beforePageLeave,"function"!==typeof u){n.next=5;break}return n.abrupt("return",u.bind(a)(i,e));case 5:case"end":return n.stop()}}),n)})))()}}},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return function(e,r,n){var i=n.value,o=null;n.value=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=this;clearTimeout(o),o=setTimeout((function(){i.call.apply(i,[a].concat(r))}),t)}}};function ft(t,e,r,n,i){var o={};return Object.keys(n).forEach((function(t){o[t]=n[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function ht(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,i)}function dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){ht(o,n,i,a,u,"next",t)}function u(t){ht(o,n,i,a,u,"throw",t)}a(void 0)}))}}var vt={watch:{activeTabId:{handler:function(){var t=this;return dt(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$el){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$nextTick();case 4:t.adjust();case 5:case"end":return e.stop()}}),e)})))()},immediate:!0}},mounted:function(){window.addEventListener("resize",this.adjust)},destroyed:function(){window.removeEventListener("resize",this.adjust)},methods:(at=lt(),ut={adjust:function(){if(this.$el){var t=this.$refs.scroll,e=this.$el.querySelector(".router-tab__item.is-active");t&&e&&!t.isInView(e)&&t.scrollIntoView(e),this.hideContextmenu()}},onTabTrans:function(){this.adjust()}},ft(ut,"adjust",[at],Object.getOwnPropertyDescriptor(ut,"adjust"),ut),ut)},pt={computed:{restoreKey:function(){var t=this.restore,e=this.basePath;if(!t||"undefined"===typeof sessionStorage)return"";var r="RouterTab:restore:".concat(e);return"string"===typeof t&&(r+=":".concat(t)),r}},mounted:function(){window.addEventListener("beforeunload",this.saveTabs)},destroyed:function(){window.removeEventListener("beforeunload",this.saveTabs)},watch:{restoreKey:function(){if(this.restoreWatch){var t=this.activeTab;this.initTabs(),this.activeTab||this.items.push(t)}}},methods:{saveTabs:function(){this.restoreKey&&sessionStorage.setItem(this.restoreKey,JSON.stringify(this.items))},clearTabsStore:function(){this.restoreKey&&sessionStorage.removeItem(this.restoreKey)},restoreTabs:function(){if(!this.restoreKey)return!1;var t=sessionStorage.getItem(this.restoreKey),e=!1;try{t=JSON.parse(t),Array.isArray(t)&&t.length&&(e=!0,this.presetTabs(t))}catch(r){}return e}}},mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"router-alive"},[r("transition",t._b({attrs:{appear:""},on:{"after-enter":t.onTrans,"after-leave":t.onTrans}},"transition",t.pageTrans,!1),[r("keep-alive",{attrs:{max:t.max}},[t.alive&&!t.onRefresh?r("router-view",t._g({key:t.key,ref:"page",class:t.pageClass},t.hooks)):t._e()],1)],1),r("transition",t._b({attrs:{appear:""},on:{"after-enter":t.onTrans,"after-leave":t.onTrans}},"transition",t.pageTrans,!1),[t.alive||t.onRefresh?t._e():r("router-view",{key:t.key,ref:"page",class:t.pageClass})],1)],1)},bt=[],yt={path:function(t){return t.path},fullpath:function(t){return j(t.fullPath)}};function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xt(t,e,r){return e&&wt(t.prototype,e),r&&wt(t,r),t}function Ot(t,e){return Tt(t)||St(t,e)||$t(t,e)||jt()}function jt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $t(t,e){if(t){if("string"===typeof t)return Pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(t,e):void 0}}function Pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function St(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(s){i=!0,o=s}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw o}}return r}}function Tt(t){if(Array.isArray(t))return t}function kt(t,e,r){var n=e.path;if(!r)return n;if("string"===typeof r){var i=yt[r.toLowerCase()];return i?i(t):r}return"function"===typeof r?kt(t,e,r(t)):n}function _t(t,e){return Object.entries(e).reduce((function(t,e){var r=Ot(e,2),n=r[0],i=r[1];return t.replace(":"+n,i)}),t)}var It=function(){function t(e,r){gt(this,t),this.vm=e,this.$route=r}return xt(t,[{key:"$route",set:function(t){if(t&&!t.matched){var e=this.vm.$router;t=e.match(t,e.currentRoute)}this._$route=t},get:function(){return this._$route||this.vm.$route}},{key:"routeIndex",get:function(){return this.vm.routeIndex}},{key:"route",get:function(){return this.$route.matched[this.routeIndex]}},{key:"basePath",get:function(){if(this.routeIndex<1)return"/";var t=this.$route.matched[this.routeIndex-1]||{},e=t.path;return e&&_t(e,this.$route.params)||"/"}},{key:"alivePath",get:function(){var t=this.$route;return this.nest?_t(this.route.path,t.params):j(t.fullPath)}},{key:"meta",get:function(){var t=this.route,e=this.vm.$nuxt;if(e)try{var r=e.context.route.meta,n=void 0===r?[]:r,i=n[this.routeIndex];if(i&&Object.keys(i).length)return i}catch(o){console.error(o)}return t&&t.meta||{}}},{key:"nest",get:function(){return this.$route.matched.length>this.routeIndex+1}},{key:"key",get:function(){return this.route?kt(this.$route,this.route,this.meta.key):""}},{key:"alive",get:function(){var t=this.meta.keepAlive;return"boolean"===typeof t?t:this.vm.keepAlive}},{key:"reusable",get:function(){var t=this.meta.reuse;return"boolean"===typeof t?t:this.vm.reuse}}]),t}();function Dt(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,i)}function At(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Dt(o,n,i,a,u,"next",t)}function u(t){Dt(o,n,i,a,u,"throw",t)}a(void 0)}))}}function Et(t,e){return Wt(t)||Mt(t,e)||Ct(t,e)||Lt()}function Lt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ct(t,e){if(t){if("string"===typeof t)return Rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(t,e):void 0}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mt(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(s){i=!0,o=s}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw o}}return r}}function Wt(t){if(Array.isArray(t))return t}function Nt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Vt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Bt=["created","mounted","activated","destroyed"],Kt={name:"RouterAlive",provide:function(){return{RouterAlive:this}},props:{keepAlive:{type:Boolean,default:!1},reuse:{type:Boolean,default:!1},max:{type:Number,default:0},pageClass:{type:[Array,Object,String],default:"router-alive-page"},transition:{type:[String,Object]}},data:function(){return this.cache={},{routeMatch:new It(this),routeIndex:this.getRouteIndex(),onRefresh:!1}},computed:Ut(Ut({},O("routeMatch",["key","meta","nest","alive","reusable","basePath","alivePath"])),{},{hooks:function(){var t=this;return Bt.reduce((function(e,r){return e["hook:"+r]=function(){return t.pageHook(r)},e}),{})},pageTrans:function(){return $(this.transition)}}),watch:{$route:{handler:function(t,e){if(e||this.$emit("ready",this),t.matched.length){var r=this.key,n=this.alive,i=this.reusable,o=this.alivePath,a=this.nest,u=this.cache[r]||{},s=u.alivePath,c=u.fullPath,l=u.vm;if(s&&!i&&s!==o&&(s="",this.refresh(r)),a&&l&&t.fullPath!==c){var f=this.matchRoute(e).key;f!==r&&(this.nestForceUpdate=!0)}var h=s?"update":"create";this.$emit("change",h,this.routeMatch),n&&(u.fullPath=t.fullPath)}},immediate:!0}},mounted:function(){this.$refs.alive=this._vnode.children[0].child._vnode.componentInstance},destroyed:function(){this.cache=null,this.routeMatch=null,this._match=null,this.$refs.alive=null},methods:{getRouteIndex:function(){var t=this,e=-1;while(t&&e<0){var r=t.$vnode||{},n=r.data;n&&n.routerView?e=n.routerViewDepth:t=t.$parent}return e+1},remove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.key,e=this.$refs.alive;if(e){var r=this.cache[t],n=e.cache,i=e.keys;r&&(r.vm.$destroy(),r.vm=null,this.cache[t]=null),Object.entries(n).find((function(e){var r=Et(e,2),o=r[0],a=r[1];if(a&&a.data.key===t)return a.componentInstance&&a.componentInstance.$destroy(),n[o]=null,y(i,o),!0}))}},refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.key;this.remove(t),t===this.key&&this.reload()},reload:function(){this.onRefresh||(this.onRefresh=!0)},pageHook:function(t){var e=this["pageHook:".concat(t)];"function"===typeof e&&e()},"pageHook:created":function(){this.cache[this.key]={alivePath:this.alivePath,fullPath:this.$route.fullPath}},"pageHook:mounted":function(){var t=this.$refs.page;this.cache[this.key].vm=t},"pageHook:activated":function(){this.nestForceUpdate&&(delete this.nestForceUpdate,this.$refs.page.$forceUpdate())},"pageHook:destroyed":function(){var t=this;return At(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:if(t.cache){e.next=4;break}return e.abrupt("return");case 4:Object.entries(t.cache).forEach((function(e){var r=Et(e,2),n=r[0],i=r[1],o=i||{},a=o.vm;a&&a._isDestroyed&&t.remove(n)}));case 5:case"end":return e.stop()}}),e)})))()},onTrans:function(){this.onRefresh&&(this.onRefresh=!1,this.$emit("change","create",this.routeMatch))},matchRoute:function(t){var e=this._match;return t===this.$route||t.fullPath===this.$route.fullPath||t===this.$route.fullPath?this.routeMatch:e?(e.$route=t,e):this._match=new It(this,t)}}},Ft=Kt;function Ht(t,e,r,n,i,o,a,u){var s,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=r,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=s):i&&(s=u?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),s)if(c.functional){c._injectStyles=s;var l=c.render;c.render=function(t,e){return s.call(e),l(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,s):[s]}return{exports:t,options:c}}var zt=Ht(Ft,mt,bt,!1,null,null,null),Gt=zt.exports;function Xt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(r),!0).forEach((function(e){Yt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Yt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Jt={name:"TabItem",inject:["$tabs"],props:{data:{type:Object,required:!0},index:Number},data:function(){return{onDragSort:!1,isDragOver:!1}},computed:qt(qt({},O("data",["id","to","icon","tabClass","target","href"])),{},{classList:function(){return["router-tab__item",this.tabClass,{"is-active":this.$tabs.activeTabId===this.id,"is-closable":this.closable,"is-contextmenu":this.$tabs.contextData.id===this.id,"is-drag-over":this.isDragOver&&!this.onDragSort}]},i18nText:function(){return this.$tabs.i18nText},untitled:function(){return this.$tabs.langs.tab.untitled},title:function(){return this.i18nText(this.data.title)||this.untitled},tips:function(){return this.i18nText(this.data.tips||this.data.title)||this.untitled},closable:function(){var t=this.$tabs,e=t.keepLastTab,r=t.items;return!1!==this.data.closable&&!(e&&r.length<2)}}),methods:{slotDefault:function(){var t=this,e=this.$createElement;return[this.icon&&e("i",{class:["router-tab__item-icon",this.icon]}),e("span",{class:"router-tab__item-title",attrs:{title:this.tips}},[this.title]),this.closable&&e("i",{class:"router-tab__item-close",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.close(e)}}})]},close:function(){this.$tabs.closeTab(this.id)},onDragStart:function(t){this.onDragSort=this.$tabs.onDragSort=!0,t.dataTransfer.dropEffect="move",t.dataTransfer.setData("text",this.index+"")},onDragEnd:function(){this.onDragSort=this.$tabs.onDragSort=!1},onDrop:function(t){var e=this.$tabs.items,r=+t.dataTransfer.getData("text"),n=e[r];e.splice(r,1),e.splice(this.index,0,n),this.isDragOver=!1}},render:function(){var t=this,e=arguments[0],r=this.$tabs.$scopedSlots.default,n=void 0===r?this.slotDefault:r;return e("router-link",{attrs:{tag:"li",to:this.to,draggable:this.$tabs.dragsort},class:this.classList,nativeOn:{dragstart:this.onDragStart,dragend:this.onDragEnd,dragover:function(e){return e.preventDefault(),function(){return t.isDragOver=!0}()},dragleave:function(e){return e.preventDefault(),function(){return t.isDragOver=!1}()},drop:this.onDrop}},[n(this)])}},Qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"router-tab__scroll",on:{wheel:function(e){return e.preventDefault(),t.onWheel(e)},mouseenter:t.update}},[r("div",{ref:"container",staticClass:"router-tab__scroll-container",class:{"is-mobile":t.isMobile},on:{scroll:t.update}},[t._t("default")],2),r("div",{directives:[{name:"show",rawName:"v-show",value:t.hasScroller,expression:"hasScroller"}],ref:"bar",staticClass:"router-tab__scrollbar",class:{"is-dragging":t.dragData}},[r("div",{ref:"thumb",staticClass:"router-tab__scrollbar-thumb",style:{width:t.thumbWidth+"px",transform:"translateX("+t.thumbLeft+"px"},on:{mousedown:function(e){return e.preventDefault(),t.onDragStart(e)}}})])])},Zt=[],te={name:"TabScroll",props:{space:{type:Number,default:300}},data:function(){return{isMobile:!1,scrollData:{clientWidth:0,scrollWidth:0,scrollLeft:0},dragData:null}},computed:{hasScroller:function(){return!this.isMobile&&!this.$tabs.onDragSort&&this.scrollData.scrollWidth>this.scrollData.clientWidth},thumbWidth:function(){if(this.hasScroller){var t=this.scrollData,e=t.clientWidth,r=t.scrollWidth;return e/r*e}},thumbLeft:function(){if(this.hasScroller){if(this.dragData)return this.dragData.thumbLeft;var t=this.scrollData,e=t.clientWidth,r=t.scrollWidth,n=t.scrollLeft;return(e-this.thumbWidth)*(n/(r-e))}}},mounted:function(){this.update()},methods:{update:function(){var t=this.$refs.container,e=t.clientWidth,r=t.scrollWidth,n=t.scrollLeft;this.isMobile=/mobile/i.test(navigator.userAgent)||!x(),Object.assign(this.scrollData,{clientWidth:e,scrollWidth:r,scrollLeft:n})},scrollTo:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];g({wrap:this.$refs.container,left:t,smooth:e})},scrollIntoView:function(t){w({el:t,wrap:this.$refs.container,inline:"center"})},isInView:function(t){var e=this.$refs.container,r=t.offsetLeft,n=e.scrollLeft;return!(r<n||r+t.clientWidth>n+e.clientWidth)},onWheel:function(t){var e=+new Date,r=e-(this.lastWheel||0)>100;if(r){this.lastWheel=e;var n=this.space,i=t.deltaY<0;this.scrollTo(this.$refs.container.scrollLeft+(i?-n:n))}},onDragStart:function(t){var e=this.thumbLeft;this.dragData={startPageX:t.pageX,startScrollLeft:this.$refs.container.scrollLeft,startThumbLeft:e,thumbLeft:e},document.addEventListener("mousemove",this.onDragMove),document.addEventListener("mouseup",this.onDragEnd)},onDragMove:function(t){var e=this.dragData,r=this.thumbWidth,n=this.scrollData,i=n.clientWidth,o=n.scrollWidth,a=e.startThumbLeft+t.pageX-e.startPageX,u=i-r;a<0?a=0:a>u&&(a=u),e.thumbLeft=a,this.scrollTo(a*(o-i)/(i-r),!1),t.preventDefault()},onDragEnd:function(t){this.dragData=null,document.removeEventListener("mousemove",this.onDragMove),document.removeEventListener("mouseup",this.onDragEnd),t.preventDefault()}}},ee=te,re=Ht(ee,Qt,Zt,!1,null,null,null),ne=re.exports,ie=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"router-tab__contextmenu",class:{"has-icon":t.hasIcon},style:{left:t.data.left+"px",top:t.data.top+"px"}},t._l(t.menuList,(function(t){return r("tab-contextmenu-item",{key:t.id,attrs:{data:t}})})),1)},oe=[],ae=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible?r("a",{staticClass:"router-tab__contextmenu-item",class:t.menuClass,attrs:{"data-action":t.id,disabled:!t.enable,title:t.tips},on:{click:function(e){t.enable&&t.data.handler(t.context)}}},[t.icon?r("i",{staticClass:"router-tab__contextmenu-icon",class:t.icon}):t._e(),t._v(" "+t._s(t.title)+" ")]):t._e()},ue=[];function se(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?se(Object(r),!0).forEach((function(e){le(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function le(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var fe={name:"ContextmenuItem",inject:["$tabs"],props:{data:{type:Object,required:!0}},computed:ce({context:function(){var t=this.$tabs,e=this.$parent,r=e.target,n=e.data;return{$tabs:t,$menu:e,target:r,data:n}}},O("data",{id:"",title:function(){return this.$tabs.langs.contextmenu[this.id]},icon:"",tips:"",class:{default:"",alias:"menuClass"},visible:!0,enable:!0},"context"))},he=fe,de=Ht(he,ae,ue,!1,null,null,null),ve=de.exports;function pe(t,e){return we(t)||ge(t,e)||be(t,e)||me()}function me(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function be(t,e){if(t){if("string"===typeof t)return ye(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(t,e):void 0}}function ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ge(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)if(r.push(a.value),e&&r.length===e)break}catch(s){i=!0,o=s}finally{try{n||null==u["return"]||u["return"]()}finally{if(i)throw o}}return r}}function we(t){if(Array.isArray(t))return t}var xe={refresh:{handler:function(t){var e=t.data,r=t.$tabs;r.refreshTab(e.id)}},refreshAll:{handler:function(t){var e=t.$tabs;e.refreshAll()}},close:{enable:function(t){var e=t.target;return e.closable},handler:function(t){var e=t.data,r=t.$tabs;r.closeTab(e.id)}},closeLefts:{enable:function(t){var e=t.$menu;return e.lefts.length},handler:function(t){var e=t.$menu;e.closeMulti(e.lefts)}},closeRights:{enable:function(t){var e=t.$menu;return e.rights.length},handler:function(t){var e=t.$menu;e.closeMulti(e.rights)}},closeOthers:{enable:function(t){var e=t.$menu;return e.others.length},handler:function(t){var e=t.$menu;e.closeMulti(e.others)}}};Object.entries(xe).forEach((function(t){var e=pe(t,2),r=e[0],n=e[1];return n.id=r}));var Oe=xe,je=["refresh","refreshAll","close","closeLefts","closeRights","closeOthers"];function $e(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=Pe(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Pe(t,e){if(t){if("string"===typeof t)return Se(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Se(t,e):void 0}}function Se(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Te(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,i)}function ke(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Te(o,n,i,a,u,"next",t)}function u(t){Te(o,n,i,a,u,"throw",t)}a(void 0)}))}}function _e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(r),!0).forEach((function(e){De(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function De(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ae={name:"TabContextmenu",inject:["$tabs"],components:{TabContextmenuItem:ve},props:{data:{type:[Boolean,Object]},menu:{type:Array,default:function(){return je}}},computed:{target:function(){return this.tabMap[this.data.id]},menuList:function(){return this.menu.map((function(t){if("string"===typeof t)return Oe[t];if(t&&t.id){var e=Oe[t.id];return e?Ie(Ie({},e),t):t}})).filter((function(t){return t}))},hasIcon:function(){return this.menuList.some((function(t){return t.icon}))},tabMap:function(){return this.$tabs.$refs.tab.reduce((function(t,e){return t[e.id]=e,t}),{})},tabs:function(){var t=this;return this.$tabs.items.map((function(e){return t.tabMap[e.id]}))},lefts:function(){return this.tabs.slice(0,this.data.index).filter((function(t){return t.closable}))},rights:function(){return this.tabs.slice(this.data.index+1).filter((function(t){return t.closable}))},others:function(){var t=this;return this.tabs.filter((function(e){return e.closable&&t.data.id!==e.id}))}},mounted:function(){this.adjust()},methods:{closeMulti:function(t){var e=this;return ke(c.a.mark((function r(){var n,i,o;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=$e(t),r.prev=1,n.s();case 3:if((i=n.n()).done){r.next=14;break}return o=i.value.id,r.prev=5,r.next=8,e.$tabs.removeTab(o);case 8:r.next=12;break;case 10:r.prev=10,r.t0=r["catch"](5);case 12:r.next=3;break;case 14:r.next=19;break;case 16:r.prev=16,r.t1=r["catch"](1),n.e(r.t1);case 19:return r.prev=19,n.f(),r.finish(19);case 22:e.$tabs.activeTab||e.$router.replace(e.target.to);case 23:case"end":return r.stop()}}),r,null,[[1,16,19,22],[5,10]])})))()},adjust:function(){var t=this.$el.clientWidth,e=window.innerWidth;this.data.left+t>e&&(this.data.left=e-t-5)}}},Ee=Ae,Le=Ht(Ee,ie,oe,!1,null,null,null),Ce=Le.exports;function Re(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,i)}function Me(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Re(o,n,i,a,u,"next",t)}function u(t){Re(o,n,i,a,u,"throw",t)}a(void 0)}))}}function We(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?We(Object(r),!0).forEach((function(e){Ue(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ue(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ve={name:"RouterTab",mixins:[T,F,H,nt,ct,vt,pt],components:{RouterAlive:Gt,TabItem:Jt,TabScroll:ne,TabContextmenu:Ce},provide:function(){return{$tabs:this}},props:{tabs:{type:Array,default:function(){return[]}},restore:{type:[Boolean,String],default:!1},restoreWatch:{type:Boolean,default:!1},defaultPage:[String,Object],tabTransition:{type:[String,Object],default:"router-tab-zoom"},pageTransition:{type:[String,Object],default:function(){return{name:"router-tab-swap",mode:"out-in"}}},contextmenu:{type:[Boolean,Array],default:!0},dragsort:{type:Boolean,default:!0},append:{type:String,default:"last"},keepLastTab:{type:Boolean,default:!0},keepAlive:{type:Boolean,default:!0},maxAlive:{type:Number,default:0},reuse:{type:Boolean,default:!1},i18n:Function,lang:{type:[String,Object],default:"auto"}},data:function(){return{items:[],onDragSort:!1,aliveReady:!1}},computed:{$alive:function(){return this.aliveReady?this.$refs.routerAlive:null},activeTabId:function(){return this.$alive?this.$alive.key:null},activeTabIndex:function(){var t=this;return this.items.findIndex((function(e){return e.id===t.activeTabId}))},activeTab:function(){return this.items[this.activeTabIndex]},basePath:function(){return this.$alive?this.$alive.basePath:"/"},defaultPath:function(){return this.defaultPage||this.basePath||"/"},tabTrans:function(){return $(this.tabTransition)},pageTrans:function(){return $(this.pageTransition)}},created:function(){Ve.Vue.prototype.$tabs=this},destroyed:function(){var t=Ve.Vue.prototype;t.$tabs===this&&(t.$tabs=null)},methods:{onAliveReady:function(t){this.$refs.routerAlive=t,this.aliveReady=!0,this.initTabs()},initTabs:function(){this.restoreTabs()||this.presetTabs()},presetTabs:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tabs,r={};this.items=e.map((function(e){e="string"===typeof e?{to:e}:e||b;var n=e.to&&t.matchRoute(e.to);if(n){var i=t.getRouteTab(n),o=i.id;if(!r[o])return delete e.id,r[o]=Object.assign(i,e)}})).filter((function(t){return!!t}))},onAliveChange:function(t,e){var r=this.items,n=this.lastMatchedKey,i=e.key,o=r.findIndex((function(t){var e=t.id;return e===i})),a=this.getRouteTab(e);if(o>-1)("create"===t||"update"===t&&r[o].to!==e.$route.fullPath)&&this.$set(r,o,a);else if("next"===this.append&&void 0!==n){var u=this.items.findIndex((function(t){return t.id===n}));r.splice(u+1,0,a)}else r.push(a);this.lastMatchedKey=i},getRouteTab:function(t){var e=t.key,r=t.$route,n=t.meta,i=Ne({},n),o=["title","tips","icon","closable"];for(var a in i)if(o.includes(a)){var u=i[a];"function"===typeof u&&(i[a]=u(r))}return Object.assign(i,{id:e,to:r.fullPath})},reload:function(){var t=this;return Me(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$alive.reload();case 1:case"end":return e.stop()}}),e)})))()},matchRoute:function(t){return this.$alive.matchRoute(t)},getRouteKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route;return this.matchRoute(t).key},getIdByPath:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var r=this.matchRoute(t),n=r.key;if(e){var i=this.items.find((function(t){var e=t.to;return j(e)===j(r.$route.fullPath)}));if(i)return n}return n}}}},Be=Ve,Ke=Be,Fe=Ht(Ke,a,u,!1,null,null,null),He=Fe.exports,ze=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"router-tab-iframe-fake"})},Ge=[];function Xe(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,i)}function qe(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Xe(o,n,i,a,u,"next",t)}function u(t){Xe(o,n,i,a,u,"throw",t)}a(void 0)}))}}var Ye={key:function(t){return"iframe-".concat(t.params.src)},title:function(t){return t.params.title},icon:function(t){return t.params.icon}},Je={name:"Iframe",inject:["$tabs"],meta:Ye,props:{src:String,title:String,icon:String},computed:{url:function(){var t=decodeURIComponent(this.src);return/^(javascript|data):/i.test(t)?"about:blank":t}},mounted:function(){var t=this;return qe(c.a.mark((function e(){var r,n,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.url,n=t.$tabs,i=n.iframes,i.includes(r)||i.push(r),n.currentIframe=r,e.next=6,t.$nextTick();case 6:t.$tabs.iframeMounted(r);case 7:case"end":return e.stop()}}),e)})))()},activated:function(){this.$tabs.currentIframe=this.url},deactivated:function(){this.$tabs.currentIframe=null},destroyed:function(){var t=this.url,e=this.$tabs.iframes,r=e.indexOf(t);r>-1&&e.splice(r,1)}},Qe=Je,Ze=Ht(Qe,ze,Ge,!1,null,null,null),tr=Ze.exports,er=[{path:"iframe/:src/:title?/:icon?",component:tr,props:!0,meta:Ye}],rr=function(t,e,r){return function(n){if(t||!t._isDestroyed){var i=t.items.find((function(t){return t.id===e})),o=r(i,"unload");return o&&"string"===typeof o?(n.preventDefault(),n.returnValue=o,t.activeTabId!==e&&t.open(i.to,!1,!1),o):void 0}}},nr={watch:{routeTab:{handler:function(t){if(t){var e="string"===typeof t?{title:t}:t,r=this.$tabs||b,n=r.activeTab;if(e&&n)for(var i in e)["id","to"].includes(i)||this.$set(n,i,e[i])}},deep:!0,immediate:!0}},mounted:function(){var t=this.$tabs,e=this.$vnode&&this.$vnode.componentOptions.Ctor.options||b,r=e.beforePageLeave;t&&r&&window.addEventListener("beforeunload",this._beforeunload=rr(t,t.activeTabId,r.bind(this)))},destroyed:function(){this._beforeunload&&window.removeEventListener("beforeunload",this._beforeunload)}};r("751c");He.install=function t(e){t.installed||(He.Vue=e,t.installed=!0,e.component(He.name,He),e.mixin(nr))},"undefined"!==typeof window&&window.Vue&&window.Vue.use(He);var ir=He;e["default"]=ir}})}));
//# sourceMappingURL=vue-router-tab.umd.min.js.map